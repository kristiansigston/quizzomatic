<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Trivia Vibe</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bungee&family=Orbitron:wght@600;800&display=swap"
      rel="stylesheet"
    />
    <link href="/static/host.css" rel="stylesheet" />
    <link href="/static/buttons.css" rel="stylesheet" />
  </head>
  <body>
    <div id="banner"></div>
    <div id="leaderboard-state" class="state-overlay">Leaderboard</div>
    <!-- VIEW 1: SPECTATOR (Default) -->
    <div id="spectator-view" class="container">
      <div id="join-section">
        <h3>Join Game</h3>
        <div class="join-input-group">
          <input type="text" id="username-input" placeholder="Enter Nickname" />
          <button id="btn-confirm-join" class="btn btn-success">JOIN</button>
        </div>
        <div id="join-status" class="hidden"></div>
      </div>
      <button id="qr-toggle" class="btn btn-mini hidden" type="button">
        Show QR
      </button>
      <div id="qr-container">
        <img id="qr-code" src="/static/qr.png" alt="Scan to Join" />
        <p>Scan to play!</p>
        <details id="debug-panel">
          <summary>Debug</summary>
          <div class="debug-panel-body">
            <div class="debug-states">
              <label
                ><input type="radio" name="gamestate" value="lobby" />
                Lobby</label
              >
              <label
                ><input type="radio" name="gamestate" value="question" />
                Question</label
              >
              <label
                ><input type="radio" name="gamestate" value="anticipation" />
                Anticipation</label
              >
              <label
                ><input type="radio" name="gamestate" value="answer" />
                Answer</label
              >
              <label
                ><input type="radio" name="gamestate" value="leaderboard" />
                Leaderboard</label
              >
              <label
                ><input type="radio" name="gamestate" value="epilogue" />
                Epilogue</label
              >
            </div>
            <button id="btn-restart" class="btn btn-danger btn-mini">
              DEBUG RESET
            </button>
            <button
              id="btn-confetti"
              class="btn btn-success btn-mini"
              type="button"
            >
              Fire Confetti
            </button>
          </div>
        </details>
      </div>
      <div id="spectator-top-row">
        <div id="scoreboard">
          <h3>Leaderboard</h3>
          <div
            id="joining-players-container"
            style="
              color: #666;
              font-style: italic;
              text-align: center;
              margin-bottom: 10px;
            "
          ></div>
          <ul id="player-list"></ul>
        </div>
      </div>
      <div id="spectator-timer" class="timer-clock">
        <svg class="timer-svg" viewBox="0 0 120 120" aria-hidden="true">
          <defs>
            <linearGradient id="timer-grad-spec" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#ff6ad5"></stop>
              <stop offset="50%" stop-color="#ffd36a"></stop>
              <stop offset="100%" stop-color="#6af3ff"></stop>
            </linearGradient>
          </defs>
          <circle class="timer-track" cx="60" cy="60" r="52"></circle>
          <circle
            class="timer-ring"
            id="spectator-ring"
            cx="60"
            cy="60"
            r="52"
            stroke="url(#timer-grad-spec)"
          ></circle>
        </svg>
        <div class="timer-center" id="spectator-time">
          <span class="timer-int">30</span><span class="timer-dec">.0</span>
        </div>
      </div>
      <div id="game-board">
        <div id="spectator-iq" class="iq-badge hidden"></div>
        <h2 id="spectator-question"></h2>
        <ul id="spectator-answers" class="spectator-answers"></ul>
      </div>
      <div class="host-controls" style="text-align: center">
        <button id="btn-start" class="btn">Start Game</button>
        <button id="btn-next" class="btn hidden">Next Question</button>
      </div>
    </div>
    <!-- VIEW 3: PLAYER INTERFACE -->
    <div id="player-view" class="container hidden">
      <div id="player-status-area"></div>
      <div id="my-player-name-container" class="player-info-floating">
        <h2 id="my-player-name">Player</h2>
        <div id="my-player-score">0</div>
      </div>
      <div id="player-timer" class="timer-clock">
        <svg class="timer-svg" viewBox="0 0 120 120" aria-hidden="true">
          <defs>
            <linearGradient id="timer-grad-player" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#ff6ad5"></stop>
              <stop offset="50%" stop-color="#ffd36a"></stop>
              <stop offset="100%" stop-color="#6af3ff"></stop>
            </linearGradient>
          </defs>
          <circle class="timer-track" cx="60" cy="60" r="52"></circle>
          <circle
            class="timer-ring"
            id="player-ring"
            cx="60"
            cy="60"
            r="52"
            stroke="url(#timer-grad-player)"
          ></circle>
        </svg>
        <div class="timer-center" id="player-time">
          <span class="timer-int">30</span><span class="timer-dec">.0</span>
        </div>
      </div>
      <div id="player-question-area">
        <div id="player-iq" class="iq-badge hidden"></div>
        <h3 id="player-question-text">Waiting for game to start...</h3>
        <div id="player-buttons"></div>
      </div>
    </div>
    <!-- Floating Action Button to Join -->
    <button id="fab-join" title="Join Game" class="hidden">+</button>
    <div id="game-over-overlay" class="hidden">
      <div class="game-over-card">
        <h2>Game Over</h2>
        <p class="game-over-subtitle">Final Leaderboard</p>
        <ul id="final-leaderboard"></ul>
        <button id="btn-new-game" class="btn">Start New Game</button>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.5/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <script src="/static/app.js"></script>
  </body>
</html>
